:root{
  --pad: 14px;
  --radius: 14px;
  --bar-h: 90px; /* височина на долната лента (прибл.) */

  /* ultra-compact quantity controls */
  --qty-size: 26px;   /* width/height of –/+ */
  --qty-font: 14px;   /* symbol size */
  --qty-gap: 6px;     /* space between buttons and number */
  --qty-num-w: 16px;  /* min width of the number */
  --qty-nudge-y: 0px; /* fine-tune vertical if needed (e.g., -1px/+1px) */
}
  
/* ===== reset / база ===== */
*{ box-sizing: border-box; }
html, body{ height: 100%; }
html, body{ overflow-x: hidden; } /* глобален фикс срещу хоризонтален скрол */
/* iOS/Instagram in-app browser – спира нежелано увеличение на шрифтове */
html{ -webkit-text-size-adjust: 100%; }
body{
  font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  margin: 0; background: #fafafa; color: #111;
  padding-bottom: calc(var(--bar-h) + env(safe-area-inset-bottom, 0px));
}
  
/* контейнер и карти */
.container{ max-width: 640px; margin: 0 auto; padding: var(--pad); }
.card{
  background:#fff; border-radius: var(--radius); padding: var(--pad);
  box-shadow: 0 6px 24px rgba(0,0,0,.06);
}
  
/* хедър */
.header{ display:flex; justify-content: space-between; align-items: center; gap:10px; margin-bottom: 8px; }
.sticky-top{ position: sticky; top: 0; background: #fff; z-index: 5; padding-top: 6px; padding-bottom: 6px; }
.table-label{ font-weight:700; }
.notice{ font-size:14px; color:#666; margin-top:4px; }
.badge{ padding:4px 10px; border-radius:999px; background:#111; color:#fff; font-size:12px; }
  
/* ===== Клиентско меню — accordion категории ===== */
.category{
  margin-top: 12px;
  border: 1px solid #eee;
  border-radius: 12px;
  background: #fff;
  overflow: hidden;
}
.category-summary{
  list-style: none;
  cursor: pointer;
  padding: 12px 14px;
  display: flex; align-items: center; justify-content: space-between;
  font-weight: 700;
}
.category > summary::-webkit-details-marker{ display:none; } /* скрит маркер в WebKit */
.category .chev{
  width: 10px; height: 10px;
  border-right: 2px solid #333; border-bottom: 2px solid #333;
  transform: rotate(-45deg);
  transition: transform .2s ease;
  margin-left: 8px;
}
.category[open] .chev{ transform: rotate(135deg); }
.category[open] .category-summary{ border-bottom: 1px solid #f0f0f0; }
  
.list{
  padding: 10px 12px;
  display: flex; flex-direction: column; gap: 10px;
}
  
/* ── Item row: name + price same row; qty on right ───────────── */
.item-row{
  display: grid;
  grid-template-columns: minmax(0,1fr) auto auto; /* name | price | qty */
  grid-template-areas: "name price qty";
  align-items: center;
  gap: 8px 12px;
  padding: 10px;
  border: 1px solid #eee;
  border-radius: 12px;
  background: #fff;
}

.item-main{
  grid-area: name;
  min-width: 0;           /* allow wrapping instead of squishing */
}

.item-name{
  font-size: clamp(16px, 2.9vw, 18px);
  font-weight: 600;
  overflow-wrap: break-word;
  word-break: normal;
  white-space: normal;
  hyphens: auto;          /* better Bulgarian word breaks */
  /* limit to two lines if desired:
  display: -webkit-box; -webkit-box-orient: vertical; -webkit-line-clamp: 2; overflow: hidden;
  */
}

.item-price{
  grid-area: price;
  display: flex;
  flex-direction: column;
  align-items: flex-end;
  justify-self: end;
  line-height: 1.15;
  text-align: right;
  min-width: max-content; /* keep price compact and on the same line */
}

.item-price-bgn{ font-size: 15px; color: #333; }
.item-price-eur{ font-size: 12px; color: #666; }

/* Quantity controls (compact, don’t shrink) */
.qty{
  grid-area: qty;
  justify-self: end;
  display: inline-flex;
  align-items: center;
  gap: var(--qty-gap);
  flex: 0 0 auto;
}

/* PERFECT centering: line-height equals height (works across browsers) */
.btn-qty{
  display: inline-block;
  width: var(--qty-size);
  height: var(--qty-size);
  line-height: calc(var(--qty-size) - 0px); /* full vertical centering */
  text-align: center;
  border-radius: 10px;
  border: 1px solid #ddd;
  background:#fff;
  font-size: var(--qty-font);
  font-weight: 600;
  cursor: pointer;
  touch-action: manipulation;
  transform: translateY(var(--qty-nudge-y)); /* optional micro-nudge */
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  padding: 0;
}
.qty-num{
  flex: 0 0 var(--qty-num-w);
  min-width: var(--qty-num-w);
  text-align: center;
  font-weight: 700;
  font-size: 13px;
  font-variant-numeric: tabular-nums;
}
  
/* ── Tiny screens: keep name+price on first row; move qty under ─ */
@media (max-width: 420px){
  .item-row{
    grid-template-columns: minmax(0,1fr) auto;
    grid-template-areas:
      "name price"
      "qty  qty";
  }
  .item-price{ justify-self: end; align-items: flex-end; }
  .qty{ justify-self: end; }

  /* even smaller qty on tiny phones */
  :root{
    --qty-size: 24px;
    --qty-font: 13px;
    --qty-gap: 5px;
    --qty-num-w: 16px;
  }
}

/* Very small devices */
@media (max-width: 340px){
  :root{
    --qty-size: 22px;
    --qty-font: 12px;
    --qty-num-w: 14px;
  }
}
  
/* бутони */
button{
  padding: 12px 16px; border: none; border-radius: 12px; cursor: pointer;
  font-weight: 700; touch-action: manipulation;
}
button.primary{ background:#111; color:#fff; }
button:disabled{ opacity:.5; cursor: not-allowed; }
  
/* таблици (ако се ползват някъде) */
.table{ width:100%; border-collapse: collapse; }
.table th, .table td{ padding:10px; text-align:left; border-bottom:1px solid #eee; }
.status{ font-weight:700; }
.filter{ display:flex; gap:8px; margin-bottom:12px; }
  
/* долна фиксирана лента (клиент) */
.checkout-bar{
  position: fixed; left: 0; right: 0; bottom: 0;
  display: grid; grid-template-columns: 1fr auto; align-items: center; gap: 12px;
  padding: 10px 14px calc(10px + env(safe-area-inset-bottom, 0px));
  background: #fff; border-top: 1px solid #eee;
  box-shadow: 0 -6px 24px rgba(0,0,0,.06);
  z-index: 100;
}
.checkout-total{ font-size: 16px; display: flex; flex-direction: column; line-height: 1.2; }
.checkout-total strong{ font-size: 18px; }
.checkout-total small{ font-size: 12px; color: #666; margin-top: 2px; }
.checkout-btn{ min-width: 130px; }
  
/* редови анимации (използва се на места) */
.order-row{ transition: opacity 180ms ease; }
.order-row.removing{ opacity: 0; }
  
/* модал (барман/общ) */
.modal{ position: fixed; inset: 0; display: none; align-items: center; justify-content: center; z-index: 1000; }
.modal.open{ display: flex; }
.modal__backdrop{ position: absolute; inset: 0; background: rgba(0,0,0,.4); }
.modal__dialog{
  position: relative; background: #fff; border-radius: 14px; padding: 16px;
  width: min(92vw, 420px); box-shadow: 0 10px 30px rgba(0,0,0,.2);
}
.modal__actions{ display: flex; justify-content: flex-end; gap: 8px; margin-top: 8px; }
  
/* резултат модал (клиент) */
.result-modal{
  position: fixed; inset: 0; display: none;
  align-items: center; justify-content: center;
  z-index: 2000;
}
.result-modal.open{ display: flex; }
.result-backdrop{
  position: absolute; inset: 0; background: rgba(0,0,0,.45);
  animation: fadeIn .2s ease;
}
.result-card{
  position: relative; background: #fff; border-radius: 16px;
  padding: 18px 18px 14px; width: min(90vw, 420px);
  text-align: center; box-shadow: 0 10px 30px rgba(0,0,0,.25);
  animation: popIn .18s ease;
}
.result-icon{ margin-bottom: 8px; }
.result-title{ margin: 6px 0 4px; font-size: 20px; }
.result-text{ margin: 0 0 12px; color: #444; }
.result-modal.success .result-title{ color: #16a34a; }
.result-modal.error .result-title{ color: #dc2626; }
  
@keyframes popIn{ from { transform: scale(.96); opacity: 0; } to{ transform: scale(1); opacity: 1; } }
@keyframes fadeIn{ from { opacity: 0; } to { opacity: 1; } }
  
/* по-едри елементи на много малки екрани */
@media (max-width: 360px){
  .checkout-btn{ min-width: 110px; }
}
  
/* ===== Барман: чисти „карти“ без цени — мобилно респонсив ===== */
  
/* Grid колони със свиваеми елементи (minmax(0,1fr) фикс) */
.orders-grid{
  display: grid;
  grid-template-columns: minmax(0, 1fr);
  gap: 14px;
}
@media (min-width: 680px){
  .orders-grid{ grid-template-columns: repeat(2, minmax(0, 1fr)); }
}
@media (min-width: 1024px){
  .orders-grid{ grid-template-columns: repeat(3, minmax(0, 1fr)); }
}
.orders-grid .empty{
  padding: 18px; text-align: center; color: #666; background: #fff;
  border: 1px solid #eee; border-radius: 14px;
}
  
.order-card{
  background: #fff;
  border: 1px solid #eee;
  border-radius: 16px;
  padding: 14px;
  box-shadow: 0 6px 18px rgba(0,0,0,.05);
  transition: opacity .18s ease, transform .18s ease;
  max-width: 100%; /* да не излиза извън контейнера */
}
.order-card.removing{ opacity: 0; transform: scale(.98); }
  
/* Заглавна зона */
.oc-head{
  display: flex; align-items: center; justify-content: space-between; gap: 10px;
  margin-bottom: 10px; flex-wrap: wrap; /* позволяваме пренасяне на тесни екрани */
}
.oc-left, .oc-right{ display:flex; align-items:center; gap:10px; min-width: 0; }
.oc-id{ font-weight: 800; font-size: 18px; letter-spacing: .2px; }
.chip{
  padding: 4px 10px; border-radius: 999px; font-size: 12px; line-height: 1;
  background: #111; color: #fff; white-space: nowrap;
}
.oc-time{ font-size: 12px; color:#666; white-space: nowrap; }
.oc-status{
  font-size: 12px; font-weight: 800; padding: 6px 10px; border-radius: 10px; line-height: 1;
  background: #f4f4f5; color: #111; white-space: nowrap;
}
.oc-status.NEW{ background:#fef3c7; }         /* жълто */
.oc-status.IN_PROGRESS{ background:#dbeafe; }  /* синьо */
.oc-status.READY{ background:#dcfce7; }        /* зеленикаво */
  
/* Артикули — прост списък, повече въздух; текстът се пренася */
.oc-list{ display:flex; flex-direction: column; gap: 8px; margin: 8px 0 10px; min-width: 0; }
.itemline{ display:flex; align-items: baseline; gap: 8px; color:#111; min-width: 0; }
.itemline .qty{ font-weight: 800; min-width: 28px; text-align: right; }
.itemline .name{
  flex: 1; min-width: 0; overflow-wrap: anywhere; word-break: break-word; white-space: normal;
}
  
/* Действия */
.oc-actions{
  display:flex; gap: 10px; flex-wrap: wrap; margin-top: 6px;
}
.oc-actions button{
  padding: 10px 12px; border-radius: 10px; border: 1px solid #eee; cursor: pointer; font-weight: 700;
  background:#fff;
}
.oc-actions .danger{ background:#fff5f5; border-color:#ffe0e0; }
.oc-actions .success{ background:#f0fff4; border-color:#dcfce7; }
  
/* ===== Горна навигация (Барман) ===== */
.topnav{
  position: sticky; top: 0; z-index: 20;
  display: flex; gap: 8px; padding: 10px var(--pad);
  background: #fff; border-bottom: 1px solid #eee;
}
.topnav a{
  display: inline-block; padding: 8px 12px; border-radius: 999px;
  text-decoration: none; color: #111; background: #f4f4f5; font-weight: 700;
  white-space: nowrap;
}
.topnav a.active{ background: #111; color: #fff; }

/* ===== Красиви форм контроли за филтри (история) ===== */
:root{
  --ctrl-bg: #fff;
  --ctrl-bd: #e9e9ea;
  --ctrl-bd-hover: #dcdcdf;
  --ctrl-bd-focus: #111;            /* акцент за рамката при фокус */
  --ctrl-ring: rgba(17,17,17,.10);  /* мек пръстен при фокус */
  --ctrl-text: #111;
  --muted: #666;
}
  
.toolbar{
  display: grid;
  gap: 10px 12px;
  grid-template-columns: repeat(12, minmax(0,1fr));
  align-items: end;
  margin: 6px 0 14px;
}
@media (max-width: 740px){
  .toolbar{ grid-template-columns: repeat(6, minmax(0,1fr)); }
}
@media (max-width: 520px){
  .toolbar{ grid-template-columns: repeat(4, minmax(0,1fr)); }
}
.field{ display: flex; flex-direction: column; gap: 6px; min-width: 0; }
.field label{
  font-size: 12px; color: var(--muted); font-weight: 700; letter-spacing: .2px;
}
.field:nth-child(1){ grid-column: span 4; }  /* ключ */
.field:nth-child(2){ grid-column: span 3; }  /* статус */
.field:nth-child(3){ grid-column: span 3; }  /* дата */
.field.actions{ grid-column: span 12; display:flex; gap:8px; flex-wrap: wrap; }
@media (min-width: 741px){
  .field.actions{ justify-content: flex-start; }
}
  
/* общ вид за input/select */
.input,
.select select{
  width: 100%;
  padding: 12px 14px;
  border-radius: 12px;
  border: 1px solid var(--ctrl-bd);
  background: var(--ctrl-bg);
  color: var(--ctrl-text);
  font: inherit;
  transition: border-color .15s ease, box-shadow .15s ease, background .15s ease;
  appearance: none; -webkit-appearance: none; -moz-appearance: none;
}
.input:hover,
.select select:hover{ border-color: var(--ctrl-bd-hover); }
.input:focus,
.select select:focus{
  outline: none;
  border-color: var(--ctrl-bd-focus);
  box-shadow: 0 0 0 4px var(--ctrl-ring);
}
  
/* красив select със стрелка */
.select{ position: relative; }
.select select{ padding-right: 42px; }
.select::after{
  content: "";
  position: absolute; right: 12px; top: 50%; transform: translateY(-50%);
  width: 18px; height: 18px; pointer-events: none; opacity: .75;
  background: no-repeat center/18px;
  /* вграден SVG chevron */
  background-image: url("data:image/svg+xml;utf8,\
  <svg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='%23666' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'>\
  <polyline points='6 9 12 15 18 9'/></svg>");
}
  
/* красиво date поле с иконка календар */
.input.date{
  padding-right: 42px;
  background-image: url("data:image/svg+xml;utf8,\
  <svg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='%23666' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'>\
  <rect x='3' y='4' width='18' height='18' rx='2' ry='2'/><line x1='16' y1='2' x2='16' y2='6'/>\
  <line x1='8' y1='2' x2='8' y2='6'/><line x1='3' y1='10' x2='21' y2='10'/></svg>");
  background-repeat: no-repeat;
  background-position: right 12px center;
  background-size: 18px;
}
.input.date::-webkit-calendar-picker-indicator{
  opacity: 0; /* скриваме иконката на Chrome/iOS, оставяме нашата */
}
  
/* чип бутони (бързи дати) */
button.chip{
  padding: 10px 12px;
  border-radius: 999px;
  border: 1px solid var(--ctrl-bd);
  background: #f6f6f7;
  color: #111;
  font-weight: 700;
}
button.chip:active{ transform: translateY(1px); }
  
/* за всеки случай — контролите да не „разпъват“ на мобилно */
.field, .input, .select{ min-width: 0; }
  
/* Навбар: бутон изход вдясно */
.topnav{ position: sticky; top:0; z-index:20; display:flex; align-items:center; gap:8px; padding:10px var(--pad); background:#fff; border-bottom:1px solid #eee; }
.topnav a{ display:inline-block; padding:8px 12px; border-radius:999px; text-decoration:none; color:#111; background:#f4f4f5; font-weight:700; white-space:nowrap; }
.topnav a.active{ background:#111; color:#fff; }
.topnav .spacer{ flex:1; }
  
/* Login карта */
.auth-card .field{ margin-top: 10px; }
  
/* ===== Desktop enhancements (широки екрани) ===== */
  
/* 1) По-широк контейнер на десктоп */
@media (min-width: 900px){
  .container{ max-width: 960px; }
}
@media (min-width: 1200px){
  .container{ max-width: 1200px; }
}
  
/* 2) Навбар като „container“ без да пипаме HTML
   Изчисляваме вътрешните падинги така, че съдържанието да е центрирано */
@media (min-width: 1200px){
  .topnav{
    padding-left: calc((100vw - 1200px)/2 + var(--pad));
    padding-right: calc((100vw - 1200px)/2 + var(--pad));
  }
}
  
/* 3) Повече колони за картите на широкий екран */
@media (min-width: 900px){
  .orders-grid{ grid-template-columns: repeat(3, minmax(0,1fr)); }
}
@media (min-width: 1280px){
  .orders-grid{ grid-template-columns: repeat(4, minmax(0,1fr)); }
}
@media (min-width: 1600px){
  .orders-grid{ grid-template-columns: repeat(5, minmax(0,1fr)); }
}
  
/* 4) По-комфортен размер и падинг на картите */
@media (min-width: 1024px){
  .card{ padding: 18px; }
  .order-card{ padding: 16px; }
  .oc-id{ font-size: 20px; }
}
  
/* 5) Лек hover ефект само на устройства с мишка */
@media (hover: hover){
  .order-card{
    transition: box-shadow .18s ease, transform .18s ease, opacity .18s ease;
  }
  .order-card:hover{
    transform: translateY(-2px);
    box-shadow: 0 10px 28px rgba(0,0,0,.08);
  }
}
  
/* 6) Toolbar (филтрите) — адаптивна подредба без зависимост от :nth-child */
.toolbar{
  grid-template-columns: repeat(12, minmax(0,1fr));
}
.toolbar > .field{
  grid-column: span 12;
}
@media (min-width: 900px){
  .toolbar > .field{ grid-column: span 3; }
  .toolbar > .field.actions{
    grid-column: span 6;
    justify-content: flex-end;
  }
}
/* бутоните вътре да не преливат */
.toolbar .field.actions{ display:flex; gap:8px; flex-wrap: wrap; }
.toolbar .field, .toolbar .input, .toolbar .select{ min-width: 0; }
  
/* 7) Текстовете в списъка да са малко по-четливи на десктоп */
@media (min-width: 1024px){
  .itemline .name{ font-size: 15px; }
  .itemline .qty{ min-width: 32px; }
}
  
/* 8) Още безопасност срещу хоризонтален скрол на широки екрани */
@media (min-width: 900px){
  .oc-head, .oc-actions{ flex-wrap: nowrap; }
  .oc-left, .oc-right, .oc-list{ min-width: 0; }
}

/* ===== Minimal +/- (symbols only, no outline box) ===== */
.btn-qty{
  display: inline-block;
  width: var(--qty-size);
  height: var(--qty-size);
  line-height: var(--qty-size);   /* perfect vertical centering */
  text-align: center;

  border: none !important;
  background: transparent !important;
  border-radius: 0 !important;

  font-size: var(--qty-font);
  font-weight: 700;
  color: #111;
  -webkit-tap-highlight-color: transparent;
  transform: translateY(var(--qty-nudge-y, 0));
  padding: 0;
}

.btn-qty:active{ transform: translateY(var(--qty-nudge-y, 0)) scale(0.96); }
